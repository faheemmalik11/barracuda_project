import{j as n}from"./ui-Dwp8H4lk.js";import{a as s,f as R}from"./vendor-CNWCjkky.js";import{ax as U,ay as z,D as L,az as Z,t as b,l as q,aA as B,ae as N,as as J,s as $,aB as H,f as W,p as K,a2 as V,a5 as G,aC as Q}from"./index-debFNmPV.js";import{g as X}from"./order-columns-BJHEcTEm.js";import{A as Y,m as ee}from"./animations-DgOVmwgG.js";const F=[{id:"ord_1001",customer:{name:"John Doe",email:"john.doe@example.com"},amount:15e3,currency:"USD",status:"delivered",items:[{productId:"prod_A",productName:"Wireless Mouse",quantity:1,price:2500},{productId:"prod_B",productName:"Keyboard",quantity:1,price:7500},{productId:"prod_C",productName:"Mousepad",quantity:2,price:2500}],payment:"payment_ord_1001",createdAt:"2024-05-01T10:00:00Z",updatedAt:"2024-05-03T14:30:00Z",fulfillment:"completed",shipping:"123 Main St, Anytown, USA"},{id:"ord_1002",customer:{name:"Jane Smith",email:"jane.smith.example@examplecompanyname.com"},amount:7500,currency:"USD",status:"pending",items:[{productId:"prod_D",productName:"USB Hub",quantity:1,price:7500}],payment:"payment_ord_1002",createdAt:"2024-05-10T11:30:00Z",updatedAt:"2024-05-10T11:30:00Z",fulfillment:"pending",shipping:"456 Oak Ave, Otherville, USA"},{id:"ord_1003",customer:{name:"Bob Johnson",email:"bob.johnson@example.com"},amount:29999,currency:"USD",status:"shipped",items:[{productId:"prod_E",productName:"27-inch Monitor",quantity:1,price:29999}],payment:"payment_ord_1003",createdAt:"2024-05-12T09:15:00Z",updatedAt:"2024-05-13T10:00:00Z",fulfillment:"in_transit",shipping:"789 Pine Ln, Sometown, USA"},{id:"ord_1004",customer:{name:"Alice Wilson",email:"alice.wilson@example.com"},amount:4500,currency:"USD",status:"cancelled",items:[{productId:"prod_F",productName:"Webcam",quantity:1,price:4500}],payment:"payment_ord_1004",createdAt:"2024-05-14T16:00:00Z",updatedAt:"2024-05-15T10:00:00Z",fulfillment:"cancelled",shipping:"pending"},{id:"ord_1005",customer:{name:"Charlie Brown",email:"charlie.brown.example@verylongcompanydomainname.com"},amount:12e3,currency:"EUR",status:"processing",items:[{productId:"prod_G",productName:"External SSD 1TB",quantity:1,price:12e3}],payment:"payment_ord_1005",createdAt:"2024-05-16T08:20:00Z",updatedAt:"2024-05-16T14:00:00Z",fulfillment:"processing",shipping:"10 Downing St, London, UK"}];function te({data:i,selectedItems:d,onRowClick:c,loading:f,emptyStateDescription:u,onShipOrder:r,onSelectionChange:p=()=>{}}){const o=i||F,t=d||[],y=c,h=f||!1,C=u||"No orders found.",S=s.useMemo(()=>U({onShip:r}),[r]),x=s.useMemo(()=>z({onShip:r}),[r]);return n.jsx(L,{data:o,columns:X(),selectedItems:t,onSelectionChange:p,getItemId:g=>g.id,onRowClick:y,rowActions:S,hoverActions:x,loading:h,emptyState:C,className:"w-full"})}const se=({pageSize:i=20,currentPage:d=1,statusFilter:c="all",filters:f={}}={})=>{const u=R(),[r,p]=s.useState(c),[o,t]=s.useState(f),[y,h]=s.useState(!1),[C]=s.useState(null),S=Z(o,300),x=s.useMemo(()=>JSON.stringify({statusFilter:r,...S}),[r,S]),g=s.useMemo(()=>{let e=[...F];if(r&&r!=="all"&&(e=e.filter(a=>a.status===r)),o.customerName&&typeof o.customerName=="string"){const a=o.customerName.toLowerCase();e=e.filter(l=>typeof l.customer=="string"?l.customer.toLowerCase().includes(a):l.customer.name.toLowerCase().includes(a)||l.customer.email.toLowerCase().includes(a))}return o.amount,o.dateRange,e},[r,o]),m=s.useMemo(()=>{const e=(d-1)*i,a=e+i;return g.slice(e,a)},[g,d,i]),O=g.length,A=Math.ceil(O/i);s.useEffect(()=>{h(!0);const e=setTimeout(()=>{h(!1)},100);return()=>clearTimeout(e)},[x,d]);const j=s.useMemo(()=>{const e=F.reduce((a,l)=>(a[l.status]=(a[l.status]||0)+1,a),{});return{status:Object.entries(e).map(([a,l])=>({value:a,count:l}))}},[]),w=s.useMemo(()=>{let e=0;return r&&r!=="all"&&e++,e+=Object.values(o).filter(a=>!a||a==="all"||a===""?!1:Array.isArray(a)?a.length>0:typeof a=="object"?Object.keys(a).length>0:!0).length,e},[r,o]),k=s.useCallback(()=>{p("all"),t({})},[]),T=s.useCallback(e=>{r!==e&&(p(e),e==="all"&&t({}))},[r]),_=s.useCallback(e=>{t(e),Object.entries(e).filter(([l])=>l!=="status").some(([,l])=>l==null||l===""?!1:Array.isArray(l)?l.length>0:typeof l=="object"?Object.keys(l).length>0:!0)&&r!==""&&p("")},[r]),I=s.useCallback(()=>{u("/orders/create")},[u]),v=s.useCallback(e=>{console.log("Exporting orders:",e),b.success(`Exporting ${e.length} orders`)},[]),D=s.useCallback((e,a)=>{console.log("Updating order status:",e.id,a),b.success(`Order ${e.id} status updated to ${a}`)},[]),P=s.useCallback(e=>{console.log("Canceling order:",e.id),b.success(`Order ${e.id} has been canceled`)},[]),M=s.useCallback(e=>{console.log("Refunding order:",e.id),b.success(`Refund initiated for order ${e.id}`)},[]),E=s.useCallback(e=>{u(`/orders/${e.id}`)},[u]);return{orders:m,totalItems:O,totalPages:A,isLoading:y,error:C,facets:j,statusFilter:r,tableFilters:o,activeFiltersCount:w,setStatusFilter:T,setTableFilters:_,clearAllFilters:k,createOrder:I,exportOrders:v,updateOrderStatus:D,cancelOrder:P,refundOrder:M,viewOrderDetails:E}};function ie(){const[i,d]=s.useState(1),[c,f]=s.useState([]),[u,r]=s.useState(void 0),p=s.useRef({}),o=q(),t=se({pageSize:o.pageSize,currentPage:i});s.useEffect(()=>{JSON.stringify(t.tableFilters)!==JSON.stringify(p.current)&&i!==1&&d(1),p.current=t.tableFilters},[t.tableFilters,i]),s.useEffect(()=>{r(void 0)},[t.statusFilter]);const y=s.useCallback(m=>{r(m)},[]),h=m=>{o.setPageSize(m),d(1)},C=()=>f([]),S=()=>{t.exportOrders(c)},x=t.activeFiltersCount>0?"Try adjusting your filters to see more results.":"No orders found.",g=m=>m==="all"?t.totalItems||0:(t.facets?.status||[]).find(j=>j.value===m)?.count||0;return n.jsxs("div",{className:"flex flex-col gap-6 p-6 pb-24",children:[n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(B,{className:"h-6 w-6 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Orders"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage and track all customer orders"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(N,{variant:"outline",onClick:S,children:[n.jsx(J,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs(N,{onClick:t.createOrder,className:"flex items-center gap-2",children:[n.jsx($,{className:"h-4 w-4"}),"Create Order"]})]})]}),n.jsx(H,{filters:W.getFilters("order"),selectedStatus:t.statusFilter,onStatusChange:t.setStatusFilter,getStatusCount:g,hasSelection:c.length>0,selectedCount:c.length,onClearSelection:C}),n.jsx(K,{entity:"orders",onFiltersChange:t.setTableFilters,onClearAllFilters:t.clearAllFilters,initialValues:t.tableFilters,totalRecords:t.totalItems||0,hasSelection:c.length>0,selectedCount:c.length,onClearSelection:C,status:t.statusFilter,onColumnsChange:y,managedColumns:u,currentPageSize:o.pageSize,onPageSizeChange:h,availablePageSizes:o.availablePageSizes}),n.jsx(V,{className:"border-none shadow-none overflow-hidden rounded-none",children:n.jsx(G,{className:"p-0",children:n.jsx(Y,{mode:"wait",children:n.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.jsx(te,{data:t.orders||[],selectedItems:c,onSelectionChange:f,onRowClick:t.viewOrderDetails,pagination:{pageSize:o.pageSize,currentPage:i,onPageChange:d,totalItems:t.totalItems||0,totalPages:t.totalPages||0},loading:t.isLoading,onViewOrder:t.viewOrderDetails,onUpdateStatus:t.updateOrderStatus,onCancelOrder:t.cancelOrder,onRefundOrder:t.refundOrder,status:t.statusFilter,emptyStateDescription:x,managedColumns:u})},t.statusFilter)})})})]})}function ce(){return n.jsx(Q,{title:"Orders",description:"Manage and track customer orders"})}export{ce as OrderHeader,te as OrderTable,ie as OrdersListPage,se as useOrders};
