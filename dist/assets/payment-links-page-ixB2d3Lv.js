import{j as e}from"./ui-Dwp8H4lk.js";import{a as s}from"./vendor-CNWCjkky.js";import{aS as f,c8 as C,aH as S,bC as j,D as P,ai as x,P as g,S as w,E as N,H as F,I as L,l as A,n as B,o as D,p as E}from"./index-debFNmPV.js";import{r as T,p as I}from"./sections-SGatBQTd.js";import{L as V}from"./link-DR2q4ox1.js";import"./animations-DgOVmwgG.js";import"./subHours-DmDwdsHQ.js";const O=({onView:o,onCancel:r,onCopyLink:a,onOpenLink:c})=>{const l=[];return o&&l.push({key:"view",label:"View Details",icon:e.jsx(f,{className:"h-4 w-4"}),onClick:o}),a&&l.push({key:"copy",label:"Copy Link",icon:e.jsx(C,{className:"h-4 w-4"}),onClick:a}),c&&l.push({key:"open",label:"Open Link",icon:e.jsx(S,{className:"h-4 w-4"}),onClick:c}),r&&l.push({key:"cancel",label:"Cancel",icon:e.jsx(j,{className:"h-4 w-4"}),onClick:n=>r(n.id),variant:"destructive"}),l},z=()=>[{key:"quick-view",label:"Quick View",icon:e.jsx(f,{className:"h-4 w-4"}),onClick:()=>{}}];function Q({data:o,selectedItems:r,onSelectionChange:a,onRowClick:c,pagination:l,loading:n,emptyStateDescription:i,onView:d,onCancel:m}){const h=t=>{switch(t){case"active":return"secondary";case"inactive":return"outline";case"expired":return"destructive";default:return"outline"}},p=s.useMemo(()=>O({onView:d||c,onCancel:m}),[d,c,m]),y=s.useMemo(()=>z(),[]),v=[{key:"name",header:"Name",width:200,render:t=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),t.description&&e.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:t.description})]})},{key:"status",header:"Status",width:100,render:t=>e.jsx(x,{variant:h(t.status),children:t.status})},{key:"type",header:"Type",width:120,render:t=>e.jsx(x,{variant:"default",className:"capitalize",children:t.type})},{key:"environment",header:"Environment",width:120,render:t=>e.jsx("span",{className:"text-sm",children:"Live"})},{key:"transactions30d",header:"Transactions (30d)",width:140,align:"right",render:t=>e.jsx("span",{className:"text-sm",children:t.conversions||0})},{key:"volume30d",header:"Volume (30d)",width:120,align:"right",render:t=>{const k=t.totalRevenue||0,u=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(k/100);return e.jsx("span",{className:"text-sm font-medium",children:u})}},{key:"success",header:"Success",width:100,align:"right",render:t=>{const k=t.views>0?(t.conversions||0)/t.views*100:0;return e.jsxs("span",{className:"text-sm font-medium",children:[k.toFixed(1),"%"]})}},{key:"created",header:"Created",width:150,render:t=>e.jsx("span",{className:"text-sm",children:new Date(t.created).toLocaleDateString()})}];return e.jsx(P,{columns:v,data:o,selectedItems:r,onSelectionChange:a,onRowClick:c,rowActions:p,hoverActions:y,getItemId:t=>t.id,pagination:l,loading:n,emptyStateDescription:i})}function R({open:o,onOpenChange:r,paymentLink:a,onBack:c,onOpenFullDetails:l,totalItems:n,navigatePrevious:i,navigateNext:d,canNavigatePrevious:m,canNavigateNext:h,className:p}){return a?e.jsx(g,{id:"payment-link-details",open:o,children:e.jsx("div",{className:"h-full flex flex-col bg-muted",children:e.jsxs(w,{ariaLabel:"Payment link details content",children:[e.jsx(N,{entityInfo:a,config:{entityType:"payment-link",entityLabel:"Payment Link",primaryField:"name",primaryFieldFormatter:y=>String(y)},onBack:c??(()=>r(!1)),currentEntityId:a.id.toString(),onOpenFullDetails:l,isDetailView:!1,totalItems:n,navigatePrevious:i,navigateNext:d,canNavigatePrevious:m,canNavigateNext:h,metadataComponent:()=>e.jsx(L,{info:a}),actionsComponent:()=>e.jsx(F,{entityInfo:a})}),e.jsx("div",{className:"space-y-2 max-w-full overflow-hidden",children:T(a)})]})})}):e.jsx(g,{id:"payment-link-details",open:o,children:e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:"No payment link selected"})})}function H(){const[o,r]=s.useState("all"),[a,c]=s.useState("all"),[l,n]=s.useState(""),[i,d]=s.useState({from:null,to:null}),m={status:o,type:a,search:l,dateRange:i},h=s.useCallback(u=>{r(u)},[]),p=s.useCallback(u=>{c(u)},[]),y=s.useCallback(u=>{n(u)},[]),v=s.useCallback(u=>{d(u)},[]),t=s.useCallback(()=>{r("all"),c("all"),n(""),d({from:null,to:null})},[]),k=s.useCallback((u,W,b)=>u==="all"?b:0,[]);return{filters:m,statusFilter:o,setStatusFilter:h,typeFilter:a,searchQuery:l,dateRange:i,updateStatusFilter:h,updateTypeFilter:p,updateSearchQuery:y,updateDateRange:v,clearFilters:t,getStatusCount:k,tableFilters:{},setTableFilters:()=>{},clearAllFilters:t,activeFiltersCount:0}}function M(){const o=s.useCallback(i=>{console.log("View payment link:",i.id)},[]),r=s.useCallback(()=>{console.log("Create new payment link")},[]),a=s.useCallback(i=>{console.log("Cancel payment link:",i)},[]),c=s.useCallback(i=>{console.log("Batch cancel payment links:",i)},[]),l=s.useCallback(i=>{console.log("Batch export payment links:",i)},[]),n=s.useCallback(i=>{console.log("Batch activate payment links:",i)},[]);return{handleView:o,handleCreateLink:r,handleCancelLink:a,handleBatchCancel:c,handleBatchExport:l,handleBatchActivate:n}}function U({closePanelsTrigger:o}){const r=H(),a=M(),c=A(),l=B({batchActions:{cancel:a.handleBatchCancel,export:a.handleBatchExport,activate:a.handleBatchActivate}});return e.jsx(D,{fetchData:I.getPaymentLinksForNavigation,pageConfig:{header:{title:"Payment Links",description:"Create and manage payment links for your products and services",primaryAction:{label:"Create Link",icon:e.jsx(V,{className:"h-4 w-4"}),onClick:a.handleCreateLink}},statusFilters:[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],table:{component:Q,props:{onView:a.handleView,onCancel:a.handleCancelLink}},tableFilters:{component:E,props:{entity:"payment-links",onBulkAction:l.handleBulkAction,additionalFilters:[{key:"type",label:"Type",options:[{label:"All Types",value:"all"},{label:"One-time",value:"one-time"},{label:"Subscription",value:"subscription"},{label:"Donation",value:"donation"}]},{key:"created",label:"Created",type:"date-range"},{key:"lastSeen",label:"Last Seen",type:"date-range"}]}}},useFilters:()=>r,useSelection:()=>l,usePageSize:()=>c,animationKey:r.statusFilter,basePath:"/payment-links",renderPanel:n=>e.jsx(R,{open:n.open,onOpenChange:n.onOpenChange,paymentLink:n.entity,onBack:n.onBack,onOpenFullDetails:n.onOpenFullDetails,totalItems:n.totalItems,navigatePrevious:n.navigatePrevious,navigateNext:n.navigateNext,canNavigatePrevious:n.canNavigatePrevious,canNavigateNext:n.canNavigateNext})})}function Z(){return e.jsx(U,{})}export{Z as default};
