import{j as o}from"./ui-Dwp8H4lk.js";import{a as r,f as M}from"./vendor-CNWCjkky.js";import{aD as R,aE as _,D as B,az as $,t as P,l as J,aA as G,ae as b,as as H,s as v,aB as Y,f as q,p as Q,a2 as V,a5 as K}from"./index-debFNmPV.js";import{g as W}from"./order-columns-BJHEcTEm.js";import{A as X,m as tt}from"./animations-DgOVmwgG.js";function et({products:l=[],selectedProducts:p=[],onSelectionChange:d=()=>{},onViewProduct:m,onEditProduct:i,onDuplicateProduct:c,onDeleteProduct:g,onUpdateStatus:a,loading:s=!1,pagination:C,status:S,emptyStateDescription:y="No products found.",managedColumns:h}){const A=r.useMemo(()=>R({onEdit:i,onView:m,onDuplicate:c,onDelete:g,onUpdateStatus:a}),[i,m,c,g,a]),f=r.useMemo(()=>_({onEdit:i,onDuplicate:c}),[i,c]);return o.jsx(B,{data:l,columns:W(),selectedItems:p,onSelectionChange:d,getItemId:u=>u.id,onRowClick:m,rowActions:A,hoverActions:f,loading:s,emptyStateDescription:y,pagination:C,status:S,managedColumns:h})}const j=[{id:"prod_01",name:"Basic Plan",description:"Entry level subscription with basic features",price:999,currency:"USD",status:"active",category:"Subscription",sku:"BASIC-PLAN-001",stock:0,sales:245,createdAt:"2023-01-15T00:00:00Z",updatedAt:"2023-01-15T00:00:00Z"},{id:"prod_02",name:"Pro Plan",description:"Professional plan with advanced features and priority support",price:2999,currency:"USD",status:"active",category:"Subscription",sku:"PRO-PLAN-001",stock:0,sales:158,createdAt:"2023-01-15T00:00:00Z",updatedAt:"2023-01-15T00:00:00Z"},{id:"prod_03",name:"Enterprise Plan",description:"Full-featured plan for large organizations with dedicated support",price:9999,currency:"USD",status:"active",category:"Subscription",sku:"ENT-PLAN-001",stock:0,sales:42,createdAt:"2023-01-15T00:00:00Z",updatedAt:"2023-01-15T00:00:00Z"},{id:"prod_04",name:"API Access Add-on",description:"Add API access to any subscription plan",price:1999,currency:"USD",status:"active",category:"Add-on",sku:"API-ADDON-001",stock:15,sales:89,createdAt:"2023-02-10T00:00:00Z",updatedAt:"2023-02-10T00:00:00Z"},{id:"prod_05",name:"Data Export Tool",description:"One-time purchase tool for data export and analysis",price:4999,currency:"USD",status:"active",category:"Tool",sku:"DATA-TOOL-001",stock:25,sales:123,createdAt:"2023-03-05T00:00:00Z",updatedAt:"2023-03-05T00:00:00Z"},{id:"prod_06",name:"Premium Support",description:"24/7 premium support add-on for any plan",price:3999,currency:"USD",status:"active",category:"Support",sku:"SUPPORT-001",stock:8,sales:67,createdAt:"2023-03-20T00:00:00Z",updatedAt:"2023-03-20T00:00:00Z"},{id:"prod_07",name:"Team Collaboration",description:"Add team collaboration features to any plan",price:1599,currency:"USD",status:"active",category:"Add-on",sku:"COLLAB-001",stock:32,sales:178,createdAt:"2023-04-12T00:00:00Z",updatedAt:"2023-04-12T00:00:00Z"},{id:"prod_08",name:"Legacy Basic Plan",description:"Previous version of the Basic Plan",price:799,currency:"USD",status:"archived",category:"Subscription",sku:"LEGACY-BASIC-001",stock:0,sales:834,createdAt:"2022-01-10T00:00:00Z",updatedAt:"2022-01-10T00:00:00Z"},{id:"prod_09",name:"Custom Integration",description:"Custom integration service (one-time fee)",price:49999,currency:"USD",status:"active",category:"Service",sku:"CUSTOM-INT-001",stock:5,sales:12,createdAt:"2023-05-18T00:00:00Z",updatedAt:"2023-05-18T00:00:00Z"},{id:"prod_10",name:"Advanced Analytics",description:"Add advanced analytics to any plan",price:2499,currency:"USD",status:"active",category:"Add-on",sku:"ANALYTICS-001",stock:18,sales:234,createdAt:"2023-06-01T00:00:00Z",updatedAt:"2023-06-01T00:00:00Z"},{id:"prod_11",name:"Storage Expansion",description:"Increase storage capacity for any plan",price:599,currency:"USD",status:"active",category:"Add-on",sku:"STORAGE-001",stock:45,sales:387,createdAt:"2023-06-15T00:00:00Z",updatedAt:"2023-06-15T00:00:00Z"},{id:"prod_12",name:"New Feature Pack",description:"Bundle of new experimental features",price:1299,currency:"USD",status:"draft",category:"Add-on",sku:"FEATURES-001",stock:0,sales:0,createdAt:"2023-07-01T00:00:00Z",updatedAt:"2023-07-01T00:00:00Z"}],st=({pageSize:l=20,currentPage:p=1,statusFilter:d="all",filters:m={}})=>{const i=M(),[c,g]=r.useState(d),[a,s]=r.useState(m),[C,S]=r.useState(!1),[y]=r.useState(null),h=$(a,300),A=r.useMemo(()=>JSON.stringify({statusFilter:c,...h}),[c,h]),f=r.useMemo(()=>{let t=[...j];if(c&&c!=="all"&&(t=t.filter(e=>e.status===c)),a.productName&&typeof a.productName=="string"){const e=a.productName.toLowerCase();t=t.filter(n=>n.name.toLowerCase().includes(e)||n.description.toLowerCase().includes(e))}if(a.category&&a.category!=="all"&&(t=t.filter(e=>e.category===a.category)),a.priceRange){const e=a.priceRange;e.min!==void 0&&(t=t.filter(n=>n.price>=e.min)),e.max!==void 0&&(t=t.filter(n=>n.price<=e.max))}if(a.sku&&typeof a.sku=="string"){const e=a.sku.toLowerCase();t=t.filter(n=>n.sku?.toLowerCase().includes(e)||!1)}return a.stockStatus&&(a.stockStatus==="low"?t=t.filter(e=>(e.stock||0)<=10):a.stockStatus==="out"?t=t.filter(e=>(e.stock||0)===0):a.stockStatus==="in-stock"&&(t=t.filter(e=>(e.stock||0)>10))),t},[c,a]),u=r.useMemo(()=>{const t=(p-1)*l,e=t+l;return f.slice(t,e)},[f,p,l]),x=f.length,T=Math.ceil(x/l);r.useEffect(()=>{S(!0);const t=setTimeout(()=>{S(!1)},100);return()=>clearTimeout(t)},[A,p]);const k=r.useMemo(()=>{const t=j.reduce((e,n)=>(e[n.status]=(e[n.status]||0)+1,e),{});return{status:Object.entries(t).map(([e,n])=>({value:e,count:n}))}},[]),F=r.useMemo(()=>{let t=0;return c&&c!=="all"&&t++,t+=Object.values(a).filter(e=>!e||e==="all"||e===""?!1:Array.isArray(e)?e.length>0:typeof e=="object"?Object.keys(e).length>0:!0).length,t},[c,a]),N=r.useCallback(()=>{g("all"),s({})},[]),D=r.useCallback(t=>{c!==t&&(g(t),t==="all"&&s({}))},[c]),w=r.useCallback(t=>{s(t),Object.entries(t).filter(([n])=>n!=="status").some(([,n])=>n==null||n===""?!1:Array.isArray(n)?n.length>0:typeof n=="object"?Object.keys(n).length>0:!0)&&c!==""&&g("")},[c]),Z=r.useCallback(()=>{i("/products/create")},[i]),E=r.useCallback(t=>{console.log("Exporting products:",t),P.success(`Exporting ${t.length} products`)},[]),I=r.useCallback(t=>{console.log("Duplicating product:",t.id),P.success(`Product "${t.name}" duplicated`)},[]),L=r.useCallback(t=>{i(`/products/${t.id}/edit`)},[i]),O=r.useCallback(t=>{console.log("Deleting product:",t.id),P.success(`Product "${t.name}" deleted`)},[]),U=r.useCallback((t,e)=>{console.log("Updating product status:",t.id,e),P.success(`Product "${t.name}" status updated to ${e}`)},[]),z=r.useCallback(t=>{i(`/products/${t.id}`)},[i]);return{products:u,totalItems:x,totalPages:T,isLoading:C,error:y,facets:k,statusFilter:c,tableFilters:a,activeFiltersCount:F,setStatusFilter:D,setTableFilters:w,clearAllFilters:N,query:A,createProduct:Z,exportProducts:E,duplicateProduct:I,editProduct:L,deleteProduct:O,updateProductStatus:U,viewProductDetails:z}};function it(){const[l,p]=r.useState(1),[d,m]=r.useState([]),[i,c]=r.useState(void 0),g=r.useRef({}),a=J(),s=st({pageSize:a.pageSize,currentPage:l});r.useEffect(()=>{JSON.stringify(s.tableFilters)!==JSON.stringify(g.current)&&l!==1&&p(1),g.current=s.tableFilters},[s.tableFilters,l]),r.useEffect(()=>{c(void 0)},[s.statusFilter]);const C=r.useCallback(u=>{c(u)},[]),S=u=>{a.setPageSize(u),p(1)},y=()=>m([]),h=()=>{s.exportProducts(d)},A=s.activeFiltersCount>0?"Try adjusting your filters to see more results.":"No products found.",f=u=>u==="all"?s.totalItems||0:(s.facets?.status||[]).find(k=>k.value===u)?.count||0;return o.jsxs("div",{className:"flex flex-col gap-6 p-6 pb-24",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(G,{className:"h-6 w-6 text-muted-foreground"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Products"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog and inventory"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(b,{variant:"outline",onClick:h,children:[o.jsx(H,{className:"h-4 w-4 mr-2"}),"Export"]}),o.jsxs(b,{onClick:s.createProduct,className:"flex items-center gap-2",children:[o.jsx(v,{className:"h-4 w-4"}),"Add Product"]})]})]}),o.jsx(Y,{filters:q.getFilters("product"),selectedStatus:s.statusFilter,onStatusChange:s.setStatusFilter,getStatusCount:f,hasSelection:d.length>0,selectedCount:d.length,onClearSelection:y}),o.jsx(Q,{entity:"products",onFiltersChange:s.setTableFilters,onClearAllFilters:s.clearAllFilters,initialValues:s.tableFilters,totalRecords:s.totalItems||0,hasSelection:d.length>0,selectedCount:d.length,onClearSelection:y,status:s.statusFilter,onColumnsChange:C,managedColumns:i,currentPageSize:a.pageSize,onPageSizeChange:S,availablePageSizes:a.availablePageSizes}),o.jsx(V,{className:"border-none shadow-none overflow-hidden rounded-none",children:o.jsx(K,{className:"p-0",children:o.jsx(X,{mode:"wait",children:o.jsx(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsx(et,{products:s.products||[],selectedProducts:d,onSelectionChange:m,onViewProduct:s.viewProductDetails,pagination:{pageSize:a.pageSize,currentPage:l,onPageChange:p,totalItems:s.totalItems||0,totalPages:s.totalPages||0},loading:s.isLoading,onEditProduct:s.editProduct,onDuplicateProduct:s.duplicateProduct,onDeleteProduct:s.deleteProduct,onUpdateStatus:s.updateProductStatus,status:s.statusFilter,emptyStateDescription:A,managedColumns:i})},s.statusFilter)})})})]})}function lt(){return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Products"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog and inventory"})]}),o.jsxs(b,{size:"sm",className:"gap-2",children:[o.jsx(v,{className:"h-4 w-4"}),"Add Product"]})]})}export{lt as ProductHeader,et as ProductTable,it as ProductsListPage,st as useProducts};
