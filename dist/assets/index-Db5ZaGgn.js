import{j as e}from"./ui-Dwp8H4lk.js";import{a2 as g,a3 as h,a4 as p,a5 as f,aM as N,a0 as x,aN as v,aO as j,aP as w,a1 as C,w as y,aQ as b,aR as I,ae as l,aS as D,as as S,aJ as k,s as E}from"./index-debFNmPV.js";import{a as o}from"./vendor-CNWCjkky.js";import"./animations-DgOVmwgG.js";const T=t=>({up:"text-green-600",down:"text-red-600",neutral:"text-muted-foreground"})[t]||"text-muted-foreground",G=t=>t.reduce((s,n)=>{const a=n.quantity*n.unitPrice,r=a*(n.taxRate||0)/100;return s+a+r},0),J=t=>new Date>t,B=t=>({paid:"Paid",sent:"Sent",overdue:"Overdue",draft:"Draft",cancelled:"Cancelled"})[t]||"Unknown",Q=(t,s="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(t/100),K=t=>new Date(t).toLocaleDateString(),W=t=>t.toLocaleString(),X=t=>`${t>=0?"+":""}${t.toFixed(1)}%`,P=t=>{switch(t){case"dollar":return C;case"file":return x;case"users":return w;case"trending-up":return j;case"trending-down":return v;default:return x}},O=t=>{switch(t){case"up":return j;case"down":return v;default:return null}};function U({metric:t}){const s=P(t.icon),n=O(t.trend),a=T(t.trend);return e.jsxs(g,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:t.title}),e.jsx(s,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsxs("p",{className:`text-xs flex items-center gap-1 ${a}`,children:[n&&e.jsx(n,{className:"h-3 w-3"}),N(t.change)," from last ",t.period||"month"]})]})]})}function $({invoice:t,onView:s}){return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.id}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.customerName}),t.customerEmail&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.customerEmail})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:y(t.amount,t.currency)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Due ",b(t.dueDate)]})]}),e.jsx(I,{variant:"generic",text:B(t.status),color:t.status==="paid"?"success":t.status==="overdue"||t.status==="cancelled"?"error":"neutral"}),s&&e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>s(t),children:e.jsx(D,{className:"h-4 w-4"})})]})]})}function M({onExport:t,onSettings:s,onCreateInvoice:n}){return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Billing Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Track invoices, payments, and revenue"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t&&e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",onClick:t,children:[e.jsx(S,{className:"h-4 w-4"}),"Export"]}),s&&e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",onClick:s,children:[e.jsx(k,{className:"h-4 w-4"}),"Settings"]}),n&&e.jsxs(l,{size:"sm",className:"gap-2",onClick:n,children:[e.jsx(E,{className:"h-4 w-4"}),"Create Invoice"]})]})]})}const R=()=>[{id:"1",title:"Total Revenue",value:"$124,500",change:12.5,trend:"up",icon:"dollar",period:"month"},{id:"2",title:"Outstanding",value:"$8,750",change:-5.2,trend:"down",icon:"file",period:"month"},{id:"3",title:"Invoices",value:"342",change:8.1,trend:"up",icon:"file",period:"month"},{id:"4",title:"Customers",value:"89",change:2.3,trend:"up",icon:"users",period:"month"}],V=()=>[{id:"INV-001",customerId:"cust-1",customerName:"Acme Corp",customerEmail:"billing@acme.com",amount:25e4,currency:"USD",status:"paid",dueDate:new Date("2024-12-15"),created:new Date("2024-11-15"),items:[{id:"item-1",description:"Professional Services",quantity:10,unitPrice:25e3,total:25e4}]},{id:"INV-002",customerId:"cust-2",customerName:"TechStart Inc",customerEmail:"finance@techstart.com",amount:18e4,currency:"USD",status:"sent",dueDate:new Date("2024-12-20"),created:new Date("2024-11-20"),items:[{id:"item-2",description:"Monthly Subscription",quantity:1,unitPrice:18e4,total:18e4}]},{id:"INV-003",customerId:"cust-3",customerName:"Global Ltd",customerEmail:"accounts@global.com",amount:32e4,currency:"USD",status:"overdue",dueDate:new Date("2024-12-10"),created:new Date("2024-11-10"),items:[{id:"item-3",description:"Consulting Services",quantity:16,unitPrice:2e4,total:32e4}]}];function z(){const[t,s]=o.useState({overview:null,loading:!0,error:null}),n=o.useCallback(async()=>{s(a=>({...a,loading:!0,error:null}));try{await new Promise(c=>setTimeout(c,800));const a=R(),r=V(),d=r.filter(c=>c.status==="paid").reduce((c,m)=>c+m.amount,0),u=r.filter(c=>c.status==="sent"||c.status==="overdue").reduce((c,m)=>c+m.amount,0),i={totalRevenue:d,outstandingAmount:u,invoiceCount:r.length,customerCount:new Set(r.map(c=>c.customerId)).size,recentInvoices:r,metrics:a};s({overview:i,loading:!1,error:null})}catch(a){s(r=>({...r,loading:!1,error:a instanceof Error?a.message:"Failed to load billing data"}))}},[]);return o.useEffect(()=>{n()},[n]),{...t,refresh:n}}function A(){const t=o.useCallback(()=>{console.log("Exporting billing data...")},[]),s=o.useCallback(()=>{console.log("Opening billing settings...")},[]),n=o.useCallback(()=>{console.log("Creating new invoice...")},[]),a=o.useCallback(r=>{console.log("Viewing invoice:",r.id)},[]);return{handleExport:t,handleSettings:s,handleCreateInvoice:n,handleViewInvoice:a}}function Y(){const{overview:t,loading:s,error:n}=z(),{handleExport:a,handleSettings:r,handleCreateInvoice:d,handleViewInvoice:u}=A();return s?e.jsx("div",{className:"container mx-auto p-6 space-y-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Billing Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading billing data..."})]})}):n?e.jsx("div",{className:"container mx-auto p-6 space-y-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Billing Overview"}),e.jsxs("p",{className:"text-red-500",children:["Error: ",n]})]})}):t?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(M,{onExport:a,onSettings:r,onCreateInvoice:d}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:t.metrics.map(i=>e.jsx(U,{metric:i},i.id))}),e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(p,{children:"Recent Invoices"})}),e.jsx(f,{children:t.recentInvoices.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No recent invoices found"})}):e.jsx("div",{className:"space-y-4",children:t.recentInvoices.map(i=>e.jsx($,{invoice:i,onView:u},i.id))})})]})]}):e.jsx("div",{className:"container mx-auto p-6 space-y-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Billing Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"No billing data available"})]})})}export{M as BillingHeader,U as BillingMetricCard,Y as BillingOverviewPage,$ as InvoiceCard,G as calculateInvoiceTotal,Q as formatCurrency,K as formatDate,W as formatNumber,X as formatPercentageChange,B as getStatusText,T as getTrendColor,J as isInvoiceOverdue,z as useBilling,A as useBillingActions};
